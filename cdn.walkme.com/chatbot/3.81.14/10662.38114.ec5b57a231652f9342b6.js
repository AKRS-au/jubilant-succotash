"use strict";(Object(null===self?this:self)._walkmeABWebpackJP_=Object(null===self?this:self)._walkmeABWebpackJP_||[]).push([[10662],{10662:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var r,a=t(15861),o=t(64687),i=t.n(o),c=t(14875),s=t(40181),u=function(e){var n=e.type,t=void 0===n?"GET":n,r=e.baseURL,a=e.url,o=e.headers,i=e.params;return new Promise((function(e,n){try{s.ZP.deps.wmAjax.execute({type:t,url:r+a,data:i,dataType:"json",headers:o,success:function(n){e({data:n})},error:function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];n(t)}})}catch(e){n(e)}}))},p=function(){var e=(0,a.Z)(i().mark((function e(){var n,t,a,o,c;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=11;break}return n=s.ZP.getUserGuid(),t=s.ZP.getEnvId(),e.next=5,s.ZP.getSettingsFile();case 5:return a=e.sent,e.next=8,u({url:"/chatbot/settings",baseURL:a.PlayerApiServer,headers:{"x-wmab-wmenv":t},params:{userGuid:n}});case 8:o=e.sent,c=o.data,r=c;case 11:return e.abrupt("return",r);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),d=p,l=t(45226),f=t(14347),v=t(64268),g=t(455),Z=t(6762),y={},h=t(42393),b=t(65520),w=t(38636),m=t.n(w),k=t(41244),P=t(55919),x=!1,O=[];function I(e,n){s.ZP.deps.eventsListener.bind(e,n),O.push({key:e,func:n})}var A=function(){var e,n,t,r,o,u,p,w,A;o=s.ZP.deps.actionStagesFactory,u=o.createActionStage,o.createActionStage=function(e){try{if(e&&"Redirect"===e.ActionType&&e.Settings&&e.Settings.actionArgs&&e.Settings.actionArgs.url){var n=e.Settings.actionArgs,t=n.url,r=n.actionBotOriginalURL;r&&(t=r),(0,v.kB)(t)&&Object.assign(e.Settings.actionArgs,{url:(0,v.u2)(t),actionBotOriginalURL:t})}}catch(e){c.Z.error(e)}for(var a=arguments.length,o=new Array(a>1?a-1:0),i=1;i<a;i++)o[i-1]=arguments[i];return u.apply(void 0,[e].concat(o))},function(){var e=s.ZP.deps.clientStorageManager,n=e.getData;s.ZP.deps.isWorkstation?e.getData=function(){var e=(0,a.Z)(i().mark((function e(t){var r,a,o,s,u,p,d,l,f=arguments;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(0,v.kB)(t)){e.next=9;break}return r=(0,v.o_)(t),a=(0,v.VC)(r),o=a[0],s=a[1],e.next=6,g.Z.getItem(o);case 6:if(!(u=e.sent)||void 0===u.value){e.next=9;break}return e.abrupt("return",(0,Z.Z)(u,s));case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),c.Z.error(e.t0);case 14:for(p=f.length,d=new Array(p>1?p-1:0),l=1;l<p;l++)d[l-1]=f[l];return e.abrupt("return",n.apply(void 0,[t].concat(d)));case 16:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(n){return e.apply(this,arguments)}}():e.getData=function(e){try{if((0,v.kB)(e)){var t=(0,v.o_)(e),r=(0,v.VC)(t),a=r[0],o=r[1],i=g.Z.getItem(a);if(i&&void 0!==i.value)return(0,Z.Z)(i,o)}}catch(e){c.Z.error(e)}for(var s=arguments.length,u=new Array(s>1?s-1:0),p=1;p<s;p++)u[p-1]=arguments[p];return n.apply(void 0,[e].concat(u))}}(),p=s.ZP.deps.inputGenerator,w=p.text,A=p.selectByText,p.text=function(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];return w.apply(void 0,[e,(0,v.H_)(n)].concat(r))},p.selectByText=function(e,n){for(var t=arguments.length,r=new Array(t>2?t-2:0),a=2;a<t;a++)r[a-2]=arguments[a];return A.apply(void 0,[e,(0,v.H_)(n)].concat(r))},function(){var e=s.ZP.deps.jQuerySelectorRunner,n=e.run;e.run=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n.apply(void 0,[(0,v.H_)(e)].concat(r))}}(),function(){var e=s.ZP.deps.win,n=e.open;Object.assign(y,{open:n}),e.open=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return n.apply(void 0,[(0,v.H_)(e)].concat(r))}}(),e=s.ZP.deps.classWalkMeAPI,Object.assign(e,{actionbot:{open:function(e){var n=e.botId,t=e.conversationId,r=e.globalConfig,a=(e.stopFlowOnClose,{type:h.D4.api});return l.Z.open(a,{botId:n,conversationId:t,globalConfig:r,stopFlowOnClose:!0})},close:function(){return l.Z.close()},isOpen:function(){return l.Z.isOpen()}}}),I(s.ZP.deps.consts.EVENTS.WalkmeReady,(function(){try{!function(){var e=/walkme(?:=|%3[dD])([0-9]+)-?([0-9]*)-?([0-9]*)(?:[?#&]walkme(-m)?(?:=|%3[dD])([0-9]+)-?([0-9]*)-?([0-9]*))?/.exec(window.location.href);if(e){var n=e[1],t=e[2],r=e[3];if(Number(n)===h.Sb&&t){var a=Object.assign({botId:Number(t)},r&&{conversationId:Number(r)}),o={id:[n,t,r].filter(Boolean).join("-"),type:h.D4.permalink};l.Z.open(o,a)}}}()}catch(e){c.Z.error(e)}})),s.ZP.isOnDemandAI()||(n=s.ZP.deps.consts.EVENTS.Launchers.LauncherClicked,t=s.ZP.getLaunchers(),r=t&&m()(t,(function(e,n){var t;return Object.assign(e,((t={})[n.Id]=n,t)),e}),{}),I(n,function(){var e=(0,a.Z)(i().mark((function e(n,t){var a,o,u,p,v,g,Z,y,w,m,k,P,O,I,A,S,_,E;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.launcherId,e.prev=1,o=r[a],!x&&o&&s.ZP.isValidLauncher(o)){e.next=5;break}return e.abrupt("return");case 5:if(x=!0,a){e.next=8;break}throw new Error("[Integration: launcher click listener] Launcher ID isn't present in data");case 8:if(p=(u={}).botId,v=u.conversationId,g=o.Settings.action,Z=g.actionType,y=g.arguments,Z!==b.iN){e.next=28;break}return e.next=13,d();case 13:if(e.t0=e.sent,e.t0){e.next=16;break}e.t0={};case 16:if(w=e.t0,m=w.launchers,k=void 0===m?{}:m,-1!==Object.keys(k).map(Number).indexOf(a)){e.next=23;break}return x=!1,e.abrupt("return");case 23:P=k[a]||{},O=P.bot,I=P.conversation,p=O,v=I,e.next=29;break;case 28:Z===b.Jq&&(S=(A=y||{}).actionBotId,_=A.actionBotConversationId,p=Number(S),v=Number(_));case 29:return E={id:a,type:h.D4.launcher},f.Z.show(E),e.next=33,l.Z.open(E,{botId:p,conversationId:v});case 33:x=!1,e.next=40;break;case 36:e.prev=36,e.t1=e.catch(1),x=!1,c.Z.error(e.t1);case 40:case"end":return e.stop()}}),e,null,[[1,36]])})));return function(n,t){return e.apply(this,arguments)}}())),I(s.ZP.deps.consts.EVENTS.BeforeWalkmeRemoved,(function(){try{l.Z.destroy();try{s.ZP.deps.wmjQuery('script[src*="chatbot"], script[src*="local"]').remove()}catch(e){}if(f.Z.removeAll(),O&&O.length)for(;O.length;){var e=O.pop();s.ZP.deps.eventsListener.unbind(e.key,e.func)}["_walkmeABWebpackJP_","__wm-ab-core-js_shared__"].forEach((function(e){window.hasOwnProperty(e)&&delete window[e]})),window.open&&"function"==typeof window.open&&window.open.toString().indexOf("resolveVariable")>-1&&(n=s.ZP.deps.win,y.open&&"function"==typeof y.open&&Object.assign(n,{open:y.open}))}catch(e){c.Z.error(e)}var n})),I("wmActionBotRun",(function(e){var n={type:h.D4.event};l.Z.open(n,e)})),I(P.Og.PREVIEW_ACTIONS_CONSOLE,(function(e){if(l.Z.emitInside({type:P.Og.PREVIEW_ACTIONS_CONSOLE,payload:e}),"close"===e.type&&(l.Z.destroy(),O&&O.length))for(;O.length;){var n=O.pop();s.ZP.deps.eventsListener.unbind(n.key,n.func)}})),s.ZP.isV2Chat()||I(s.ZP.deps.consts.EVENTS.LanguageChanged,(function(e,n){var t=n.language;l.Z.isOpen()&&l.Z.emitInside({type:k.k7,payload:{data:{language:t}}})}))},S=t(44451),_=function(e){l.Z.isOpen()&&l.Z.emitInside({type:k.ch,payload:e})},E=function(e){l.Z.isOpen()&&l.Z.emitInside({type:k.k7,payload:e})},L=function(){var e;s.ZP.isV2Chat()&&(s.ZP.deps.eventsListener.bind(null==(e=s.ZP.deps.consts.EVENTS)?void 0:e.LanguageChanged,E),s.ZP.deps.eventsListener.bind(k.ch,_))},C={init:function(e){return(0,a.Z)(i().mark((function n(){var t,r;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=e.wmDependencies,r=e.config,s.ZP.init(t),S.Z.init(r),f.Z.init(),A(),L();case 6:case"end":return n.stop()}}),n)})))()}}}}]);